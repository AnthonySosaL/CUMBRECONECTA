<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Mis Reservas – CumbreConecta</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="mis_reservas.css" rel="stylesheet">
</head>
<body>
  <!-- ===== NAVBAR ===== -->
  <header>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm py-3">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/">
        <i class="bi bi-graph-up-arrow fs-4"></i><span>CumbreConecta</span>
      </a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
        <i class="bi bi-list fs-1"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarMenu">
        <ul class="navbar-nav ms-auto text-center gap-lg-2">
          <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/user">Panel</a></li>
          <li class="nav-item"><a class="nav-link active" href="/mis_reservas">Mis reservas</a></li>
          <li class="nav-item"><a class="nav-link" href="/perfil">Perfil</a></li>
          <li class="nav-item"><a class="nav-link" href="#" id="logoutLink">Cerrar sesión</a></li>
        </ul>
        <span class="navbar-text ms-lg-3 d-none" id="userWelcome"></span>
      </div>
    </div>
  </nav>
</header>

  <!-- ===== CONTENIDO ===== -->
  <main class="container py-5">
    <div class="wrapper card shadow-sm p-4">
      <!-- Título + glosario -->
      <div class="d-flex flex-column flex-lg-row align-items-start justify-content-between mb-4 gap-3">
        <h2 class="flex-grow-1 text-lg-center mb-0">Mis Reservas</h2>

        <!-- Glosario detallado -->
        <div class="legend small d-flex flex-column">
          <div class="d-flex align-items-start mb-1">
            <span class="badge badge-pendiente me-2 flex-shrink-0">Pendiente</span>
            <span>Pago aprobado ✔; estamos confirmando la disponibilidad de guía y equipo.</span>
          </div>
          <div class="d-flex align-items-start mb-1">
            <span class="badge badge-pagado me-2 flex-shrink-0">Pagado</span>
            <span>Guía y equipo asignados. ¡Nos vemos en la cumbre!</span>
          </div>
          <div class="d-flex align-items-start">
            <span class="badge badge-falla me-2 flex-shrink-0">Rechazada</span>
            <span>No se pudo completar la reserva su dinero se retornara(pago fallido o sin disponibilidad).</span>
          </div>
        </div>
      </div>

      <!-- Grid de reservas -->
      <div id="listadoReservas" class="row g-4 justify-content-center"></div>
      <p id="sinReservas" class="text-center text-muted d-none mb-0">Aún no tienes reservas registradas.</p>
    </div>
  </main>

  <!-- Toast de notificación -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100">
    <div id="reservaToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="toastMsg"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
      </div>
    </div>
  </div>

  <!-- Modal informativo toast -->
  <div class="modal fade modal-paleta" id="modalToastInfo" tabindex="-1" aria-labelledby="modalToastInfoLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0 border-bottom border-3 border-success" style="border-color: var(--green)!important;">
          <h5 class="modal-title text-success" id="modalToastInfoLabel">¿Cómo ver los detalles?</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body text-dark">
          Haz clic sobre la opción de tu caso en pantalla para ver los detalles completos de la reserva y su resolución.<br>
          <small class="text-muted">(Cada tarjeta corresponde a una reserva. Al hacer clic, verás todos los datos y detalles adicionales si existen.)</small>
        </div>
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-success" data-bs-dismiss="modal">Entendido</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for informational message -->
<div id="infoModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeInfoModal()">&times;</span>
    <p>Haz clic sobre la opción de tu caso en pantalla para ver los detalles completos.</p>
  </div>
</div>

  <script src="mis_reservas.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
